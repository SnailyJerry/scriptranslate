# ğŸŒ å¯¹è¯ç¿»è¯‘å·¥å…· v3.0

ä¸€ä¸ªåŸºäº Streamlit çš„æ™ºèƒ½å¯¹è¯ç¿»è¯‘å·¥å…·ï¼Œæ”¯æŒæ‰¹é‡ç¿»è¯‘è‹±æ–‡å¯¹è¯ä¸ºä¸­è‹±åŒè¯­æ ¼å¼ã€‚

[![Streamlit App](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://your-app-url.streamlit.app)

## âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸš€ **æ‰¹é‡æ–‡ä»¶ä¸Šä¼ ç¿»è¯‘** - æœ€å¤šæ”¯æŒ5ä¸ªæ–‡ä»¶åŒæ—¶å¤„ç†
- âš¡ **è¶…å¿«é€Ÿåº¦** - æ•´ä¸ªæ–‡ä»¶ä¸€æ¬¡æ€§å¤„ç†ï¼Œæ”¯æŒ20ä¸‡tokens
- ğŸ“¦ **å¤šæ ¼å¼è¾“å‡º** - æ”¯æŒ Markdownã€TXTã€PDF ä¸‰ç§æ ¼å¼ä¸‹è½½
- ğŸŒ **å¼ºå¤§AIæ¨¡å‹** - ä½¿ç”¨ Google Gemini 2.5 Flash æ¨¡å‹
- ğŸ”§ **æ™ºèƒ½æ¸…ç†** - è‡ªåŠ¨æ¸…ç† `[tag]` è¯­æ°”æ ‡ç­¾
- ğŸ“Š **å®æ—¶è¿›åº¦** - å¯è§†åŒ–å¤„ç†è¿›åº¦å’Œç»Ÿè®¡ä¿¡æ¯

## ğŸ¯ åœ¨çº¿ä½¿ç”¨

è®¿é—®åœ¨çº¿ç‰ˆæœ¬ï¼š[https://your-app-url.streamlit.app](https://your-app-url.streamlit.app)

éœ€è¦å‡†å¤‡ï¼š
- OpenRouter API Keyï¼ˆåœ¨ [OpenRouter](https://openrouter.ai/) æ³¨å†Œè·å–ï¼‰

## ğŸš€ æœ¬åœ°è¿è¡Œ

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/your-repo-name.git
cd your-repo-name
```

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 3. è¿è¡Œåº”ç”¨

```bash
streamlit run app.py
```

ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:8501

---

## ğŸ“– è¾“å…¥è¾“å‡ºæ ¼å¼

### è¾“å…¥æ ¼å¼ç¤ºä¾‹

```
Sally: [warm, affirming] Yes! And the little elephant smiled. You know, he said, I do like my long trunk.
Pete: [joyful] Yay! He loves his long trunk now! It's special!
Sally: [enthusiastic] Exactly! You're so right! It makes him special. Great thinking! [playful] Ready for Riddle Talk? I give clues!
```

### è¾“å‡ºæ ¼å¼ç¤ºä¾‹

```
Sally: Yes! And the little elephant smiled. You know, he said, I do like my long trunk.
Sally: æ˜¯çš„ï¼å°è±¡ç¬‘äº†ã€‚ä½ çŸ¥é“å—ï¼Œä»–è¯´ï¼Œæˆ‘çœŸçš„å¾ˆå–œæ¬¢æˆ‘é•¿é•¿çš„è±¡é¼»ã€‚

Pete: Yay! He loves his long trunk now! It's special!
Pete: è€¶ï¼ä»–ç°åœ¨çˆ±ä¸Šè‡ªå·±é•¿é•¿çš„è±¡é¼»äº†ï¼å®ƒå¾ˆç‰¹åˆ«ï¼

Sally: Exactly! You're so right! It makes him special. Great thinking! Ready for Riddle Talk? I give clues!
Sally: å®Œå…¨æ­£ç¡®ï¼ä½ è¯´å¾—å¤ªå¯¹äº†ï¼è¿™è®©ä»–ä¸ä¼—ä¸åŒã€‚æƒ³å¾—çœŸæ£’ï¼å‡†å¤‡å¥½ç©çŒœè°œæ¸¸æˆäº†å—ï¼Ÿæˆ‘æ¥ç»™æç¤ºï¼
```

---

## ğŸ“ è¾“å‡ºæ–‡ä»¶

å¤„ç†åçš„æ–‡ä»¶å°†ä¿å­˜åœ¨ `output` ç›®å½•ä¸‹å¯¹åº”çš„æ‰¹æ¬¡æ–‡ä»¶å¤¹ä¸­ï¼š

```
output/
â”œâ”€â”€ batch01/
â”‚   â”œâ”€â”€ dialogue1_translated.md
â”‚   â”œâ”€â”€ dialogue1_translated.pdf
â”‚   â”œâ”€â”€ dialogue2_translated.md
â”‚   â””â”€â”€ dialogue2_translated.pdf
â”œâ”€â”€ batch02/
â”‚   â”œâ”€â”€ dialogue3_translated.md
â”‚   â””â”€â”€ dialogue3_translated.pdf
```

æ¯ä¸ªæ–‡ä»¶ä¼šç”Ÿæˆä¸¤ä¸ªç‰ˆæœ¬ï¼š
- **`.md`**: Markdownæ ¼å¼çš„åŒè¯­æ–‡æœ¬
- **`.pdf`**: PDFæ ¼å¼çš„åŒè¯­æ–‡æœ¬ï¼ˆå¸¦æœ‰æ ¼å¼æ’ç‰ˆï¼‰

---

## âš™ï¸ é…ç½®è¯´æ˜

### APIé…ç½®

ç¨‹åºä½¿ç”¨OpenRouter APIè°ƒç”¨Google Gemini 2.5 Flashæ¨¡å‹è¿›è¡Œç¿»è¯‘ã€‚

- **APIç«¯ç‚¹**: `https://openrouter.ai/api/v1/chat/completions`
- **æ¨¡å‹**: `google/gemini-2.5-flash`
- **API Key**: åœ¨å‘½ä»¤è¡Œç‰ˆæœ¬ä¸­å·²å†…ç½®ï¼ŒWebç‰ˆæœ¬éœ€è¦æ‰‹åŠ¨è¾“å…¥

### å¹¶å‘é…ç½®

- å‘½ä»¤è¡Œç‰ˆæœ¬ï¼šé»˜è®¤ä½¿ç”¨4ä¸ªå¹¶å‘çº¿ç¨‹ï¼Œå¯åœ¨ `translator.py` ä¸­ä¿®æ”¹ `MAX_WORKERS` å˜é‡
- Webç‰ˆæœ¬ï¼šå¯åœ¨ç•Œé¢ä¸Šé€šè¿‡æ»‘å—è°ƒæ•´ï¼ˆ1-8ä¸ªçº¿ç¨‹ï¼‰

---

## ğŸ› ï¸ æŠ€æœ¯ç»†èŠ‚

### å¤„ç†æµç¨‹

1. **æ‰«ææ‰¹æ¬¡æ–‡ä»¶å¤¹**: æŸ¥æ‰¾ `input` ç›®å½•ä¸‹æ‰€æœ‰ä»¥ `batch` å¼€å¤´çš„æ–‡ä»¶å¤¹
2. **è¯»å–æ–‡ä»¶å†…å®¹**: æ”¯æŒå¤šç§æ–‡æœ¬æ ¼å¼
3. **è§£æå¯¹è¯è¡Œ**: è¯†åˆ« `Speaker: content` æ ¼å¼
4. **æ¸…ç†æ ‡ç­¾**: ç§»é™¤ `[tag]` è¯­æ°”æ ‡ç­¾
5. **è°ƒç”¨APIç¿»è¯‘**: ä½¿ç”¨Google Geminiæ¨¡å‹é€å¥ç¿»è¯‘
6. **ç”ŸæˆåŒè¯­æ–‡æœ¬**: æŒ‰ç…§æŒ‡å®šæ ¼å¼ç»„ç»‡è¾“å‡º
7. **ä¿å­˜Markdown**: ç”Ÿæˆå¸¦æ ¼å¼çš„MDæ–‡ä»¶
8. **è½¬æ¢ä¸ºPDF**: ä½¿ç”¨WeasyPrintç”ŸæˆPDFæ–‡ä»¶

### æ ¸å¿ƒä¾èµ–

- **requests**: HTTPè¯·æ±‚ï¼Œè°ƒç”¨OpenRouter API
- **markdown**: Markdownè½¬HTML
- **weasyprint**: HTMLè½¬PDF
- **streamlit**: Webç•Œé¢æ¡†æ¶

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•ä¿®æ”¹API Keyï¼Ÿ

**å‘½ä»¤è¡Œç‰ˆæœ¬**: ç¼–è¾‘ `translator.py` æ–‡ä»¶ï¼Œä¿®æ”¹ç¬¬18è¡Œçš„ `OPENROUTER_API_KEY` å˜é‡

**Webç‰ˆæœ¬**: åœ¨ä¾§è¾¹æ çš„è¾“å…¥æ¡†ä¸­è¾“å…¥æ‚¨çš„API Key

### Q2: å¦‚ä½•è°ƒæ•´ç¿»è¯‘é€Ÿåº¦ï¼Ÿ

åœ¨ä»£ç ä¸­æ‰¾åˆ° `time.sleep(0.5)` è¿™ä¸€è¡Œï¼Œå¯ä»¥è°ƒæ•´å»¶è¿Ÿæ—¶é—´ï¼š
- å‡å°‘æ•°å€¼ï¼ˆå¦‚0.3ï¼‰å¯åŠ å¿«é€Ÿåº¦ï¼Œä½†å¯èƒ½è§¦å‘APIé™æµ
- å¢åŠ æ•°å€¼ï¼ˆå¦‚1.0ï¼‰ä¼šæ›´ç¨³å®šï¼Œä½†é€Ÿåº¦è¾ƒæ…¢

### Q3: æ”¯æŒå“ªäº›æ–‡ä»¶æ ¼å¼ï¼Ÿ

ç›®å‰æ”¯æŒï¼š`.txt`, `.md`, `.doc`, `.docx`

å¦‚éœ€æ”¯æŒå…¶ä»–æ ¼å¼ï¼Œå¯ä»¥ä¿®æ”¹ `SUPPORTED_FORMATS` å˜é‡ã€‚

### Q4: PDFè½¬æ¢å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

PDFè½¬æ¢å¤±è´¥é€šå¸¸æ˜¯ç”±äºç¼ºå°‘ç³»ç»Ÿå­—ä½“ã€‚ç¡®ä¿ç³»ç»Ÿå®‰è£…äº†ä¸­æ–‡å­—ä½“ï¼ˆå¦‚å¾®è½¯é›…é»‘ï¼‰ã€‚

Markdownæ–‡ä»¶ä»ä¼šæ­£å¸¸ç”Ÿæˆï¼Œå¯ä»¥æ‰‹åŠ¨ä½¿ç”¨å…¶ä»–å·¥å…·è½¬æ¢PDFã€‚

### Q5: å¦‚ä½•æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Ÿ

å‘½ä»¤è¡Œç‰ˆæœ¬ä¼šè‡ªåŠ¨æ˜¾ç¤ºè¯¦ç»†çš„å¤„ç†çŠ¶æ€ã€‚

Webç‰ˆæœ¬åœ¨å¤„ç†è¿‡ç¨‹ä¸­ä¼šæ˜¾ç¤ºå®æ—¶è¿›åº¦å’ŒçŠ¶æ€ä¿¡æ¯ã€‚

---

## ğŸ“ ç¤ºä¾‹ï¼šå®Œæ•´è¿è¡Œæµç¨‹

```bash
# 1. åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•
cd /Users/jerry/Documents/03_æŠ€æœ¯å¼€å‘/VSCODE/1105äº§å‡ºç¿»è¯‘ç¨¿

# 2. å®‰è£…ä¾èµ–ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
pip install -r requirements.txt

# 3. å‡†å¤‡è¾“å…¥æ–‡ä»¶
# åœ¨ input/batch01 ä¸­æ”¾å…¥å¾…ç¿»è¯‘çš„æ–‡ä»¶

# 4. è¿è¡Œå‘½ä»¤è¡Œç‰ˆæœ¬
python translator.py

# æˆ–è€…è¿è¡ŒWebç‰ˆæœ¬
streamlit run app.py
```

---

## ğŸ¯ è¾“å‡ºç¤ºä¾‹

è¿è¡Œå‘½ä»¤è¡Œç‰ˆæœ¬æ—¶ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹è¾“å‡ºï¼š

```
============================================================
ğŸš€ å¯¹è¯ç¿»è¯‘å·¥å…· v1.0
============================================================

ğŸ“¦ æ‰¾åˆ° 2 ä¸ªæ‰¹æ¬¡æ–‡ä»¶å¤¹: batch01, batch02

âš™ï¸ ä½¿ç”¨ 4 ä¸ªå¹¶å‘çº¿ç¨‹å¤„ç†

============================================================
ğŸ“ å¼€å§‹å¤„ç†æ‰¹æ¬¡: batch01
============================================================
ğŸ“ æ‰¾åˆ° 2 ä¸ªæ–‡ä»¶å¾…å¤„ç†

ğŸ“– æ­£åœ¨å¤„ç†: dialogue1.txt
  [1/15] ç¿»è¯‘: Sally: Yes! And the little elephant...
  [2/15] ç¿»è¯‘: Pete: Yay! He loves his long trunk...
  ...
âœ… Markdownå·²ä¿å­˜: dialogue1_translated.md
âœ… PDFå·²ä¿å­˜: dialogue1_translated.pdf
âœ… å®Œæˆç¿»è¯‘: 15 è¡Œå¯¹è¯

âœ¨ æ‰¹æ¬¡ batch01 å®Œæˆ: 2/2 ä¸ªæ–‡ä»¶æˆåŠŸ

============================================================
ğŸ“Š å¤„ç†ç»“æœæ±‡æ€»
============================================================
âœ… batch01: 2/2 ä¸ªæ–‡ä»¶æˆåŠŸ
âœ… batch02: 1/1 ä¸ªæ–‡ä»¶æˆåŠŸ

âœ¨ æ€»è®¡: 3/3 ä¸ªæ–‡ä»¶æˆåŠŸ
â±ï¸ æ€»è€—æ—¶: 45.23 ç§’
ğŸ“ è¾“å‡ºç›®å½•: output/

ğŸ‰ æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘è€…ã€‚

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œä¸ªäººä½¿ç”¨ã€‚
